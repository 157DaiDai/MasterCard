<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Ｈ私人服務 · VIP 黑金</title>
  <style>
    :root{
      /* 黑金主題 */
      --bg:#0a0a0c;               /* 背景（最暗） */
      --gold:#d4af37;             /* 主金色 */
      --gold-soft:#c9a63a;        /* 次金色 */
      --text:#f5f5f7;             /* 亮文字 */
      --muted:#c9c9cf;            /* 次文字 */
      --ok:#45d07a;               /* 確認色 */
      --danger:#ff5858;           /* 刪除色 */

      /* 分層深淺（區隔三者） */
      --card-points:#141419;      /* 點數顯示框底色（較亮） */
      --card-service:#101015;     /* 選擇服務框底色（中間） */
      --panel-modal:#0e0f12;      /* 服務介面底色（最暗） */

      /* 卡片質感與金色邊框 */
      --frame-border:1.3px solid rgba(212,175,55,0.55);
      --frame-glow:0 0 0 1px rgba(212,175,55,0.22), 0 18px 40px rgba(0,0,0,0.6);
      --radius:18px;
      --radius-sm:12px;
    }

    *{box-sizing:border-box}
    html,body{
      height:100%;
      margin:0;
      background:
        radial-gradient(1100px 700px at 15% 8%, rgba(212,175,55,0.07), transparent 60%),
        radial-gradient(900px 650px at 85% 92%, rgba(212,175,55,0.05), transparent 60%),
        var(--bg);
      color:var(--text);
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Noto Sans TC", "Microsoft JhengHei", Arial, "Helvetica Neue", sans-serif;
    }

    .wrap{
      max-width:1000px;
      margin:0 auto;
      padding:20px;
    }
    @media (min-width:980px){ .wrap{ padding:40px } }

    header{
      display:flex;align-items:center;justify-content:space-between;gap:16px;margin-bottom:18px;
    }
    .brand{ 
	display: flex;
	align-items: center;
	gap:12px; 
	}
    .brand-mark{
      width:38px;height:38px;border-radius:50%;
      background:linear-gradient(135deg, rgba(212,175,55,0.22), rgba(212,175,55,0.08));
      border:1px solid rgba(212,175,55,0.35);
      box-shadow:0 10px 22px rgba(212,175,55,0.18);
    }
    .brand-title{ font-weight:800;letter-spacing:0.6px }
    .brand-sub{ color:var(--muted);font-size:0.92rem }
	/*尊榮體驗*/
    .brand-badge {
      display: inline-flex;
      align-items: center;
      gap: 9px;
      padding: 6px 15px;
      background: linear-gradient(135deg, rgba(212,175,55,0.18), rgba(212,175,55,0.05));
      border: 1px solid rgba(212,175,55,0.4);
      border-radius: 999px;
      box-shadow: 0 4px 12px var(--shadow), inset 0 1px 0 rgba(255,255,255,0.04);
      font-size: 18px;
      color: var(--gold);
    }
    .brand-badge .dot {
      width: 9px; 
	  height: 9px;
	  border-radius: 50%;
      background: var(--gold);
      box-shadow: 0 0 10px rgba(212,175,55,0.6);
    }
    /* 卡片外觀（金色邊框 + 光暈） */
    .card{
      border:var(--frame-border);
      border-radius:var(--radius);
      box-shadow:var(--frame-glow);
      overflow:hidden;
    }
    .card-inner{
      padding:18px;
      background:linear-gradient(180deg, rgba(212,175,55,0.07), rgba(212,175,55,0.03));
    }
    @media (min-width:980px){ .card-inner{ padding:24px } }

    /* 點數顯示框（較亮層） */
    .points-card{ background-color:var(--card-points) }
    .points-row{ display:flex;align-items:center;justify-content:space-between;gap:12px }
    .points-left{ display:flex;align-items:baseline;gap:12px }
    .points-value{
      font-size:2.6rem;font-weight:900;line-height:1;
      background:linear-gradient(180deg, var(--gold), var(--gold-soft));
      -webkit-background-clip:text;
      background-clip:text;
      -webkit-text-fill-color: transparent; /* 確保漸層文字在各瀏覽器可見 */
      text-shadow:0 2px 12px rgba(212,175,55,0.22);
    }
    .points-label{ color:var(--muted);font-weight:600 }
    .admin-slot{ display:flex;align-items:center;gap:8px;min-height:44px }

    /* 選擇服務框（中間層） */
    .service-card{ background-color:var(--card-service); margin-top:16px }
    .service-top{ display:flex;flex-direction:column;align-items:flex-start;margin-bottom:8px }
    .service-title{ font-weight:800;color:var(--text) }
    .service-sub{ color:var(--muted);font-size:0.92rem;margin-top:2px }

    .service-frame{
      display:flex;align-items:center;justify-content:space-between;gap:12px;
      padding:12px;border-radius:var(--radius-sm);
      border:1px solid rgba(212,175,55,0.28);
      background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
      cursor:pointer;
      transition:box-shadow .2s ease, transform .08s ease, background .2s ease, border .2s ease;
    }
    .service-frame:hover{
      box-shadow:0 8px 18px rgba(212,175,55,0.18);
      border-color:rgba(212,175,55,0.42);
    }

    /* 通用按鈕 */
    .btn{
      appearance:none;border:none;padding:10px 14px;border-radius:12px;
      font-weight:700;letter-spacing:0.3px;cursor:pointer;
      transition:transform .08s ease, box-shadow .2s ease, background .2s ease, color .2s ease, border .2s ease;
    }
    .btn:active{ transform:scale(0.98) }

    .btn-outline-gold{
      background:transparent;border:1px solid rgba(212,175,55,0.55);color:var(--gold);
    }
    .btn-outline-gold:hover{
      background:rgba(212,175,55,0.08);box-shadow:0 6px 16px rgba(212,175,55,0.22);
    }
    .btn-gold{
      background:linear-gradient(180deg, rgba(212,175,55,0.95), rgba(212,175,55,0.80));color:#1a1a1a;
      box-shadow:0 8px 18px rgba(212,175,55,0.28);
    }
    .btn-gold:hover{ box-shadow:0 10px 22px rgba(212,175,55,0.34) }
    .btn-danger{
      background:transparent;border:1px solid rgba(255,88,88,0.7);color:var(--danger);
    }
    .btn-danger:hover{ background:rgba(255,88,88,0.08);box-shadow:0 6px 16px rgba(255,88,88,0.18) }
    .btn-ok{
      background:transparent;border:1px solid rgba(69,208,122,0.7);color:var(--ok);
    }
    .btn-ok:hover{ background:rgba(69,208,122,0.08);box-shadow:0 6px 16px rgba(69,208,122,0.18) }

    /* 彈窗介面（最暗層） */
    .modal{
      position:fixed;inset:0;display:none;align-items:center;justify-content:center;
      padding:24px;background:rgba(0,0,0,0.55);backdrop-filter:saturate(150%) blur(6px);z-index:50;
    }
    .modal.show{ display:flex }
    .panel{
      width:100%;max-width:760px;background-color:var(--panel-modal);
      border:var(--frame-border);box-shadow:var(--frame-glow);border-radius:var(--radius);
    }
    .panel-inner{ padding:16px }
    @media (min-width:680px){ .panel-inner{ padding:18px } }

    .panel-top{
      display:flex;align-items:center;justify-content:space-between;gap:10px;margin-bottom:12px;
    }
    .panel-title{ font-weight:800;color:var(--muted) }
    .panel-actions{ display:flex;gap:8px;align-items:center }

    .options{
      display:grid;grid-template-columns:repeat(2,1fr);gap:12px;
    }
    @media (min-width:700px){ .options{ grid-template-columns:repeat(3,1fr) } }

    .option{
      user-select:none;display:flex;align-items:center;justify-content:center;
      min-height:64px;padding:14px 10px;border-radius:var(--radius-sm);
      text-align:center;color:var(--text);cursor:pointer;
      background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
      border:1px solid rgba(212,175,55,0.25);
      transition:box-shadow .2s ease, transform .08s ease, background .2s ease, border .2s ease;
    }
    .option:hover{ box-shadow:0 8px 18px rgba(212,175,55,0.16) }
    .option:active{ transform:scale(0.98) }
    .option.selected{
      background:linear-gradient(180deg, rgba(212,175,55,0.16), rgba(212,175,55,0.08));
      border:2px solid var(--gold);
      box-shadow:0 10px 22px rgba(212,175,55,0.22);
    }
    .option.plus{
      background:linear-gradient(180deg, rgba(20,20,24,0.7), rgba(20,20,24,0.6));
      border:1px dashed rgba(212,175,55,0.50);
      color:var(--gold);font-weight:800;letter-spacing:1px;
    }
    .option.plus:hover{
      background:linear-gradient(180deg, rgba(212,175,55,0.12), rgba(212,175,55,0.06));
    }

    /* 桌面排版微調 */
    @media (min-width:980px){ .points-value{ font-size:3rem } }
  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <div class="brand">
        <div class="brand-mark" aria-hidden="true"></div>
        <div>
          <div class="brand-title">Ｈ私人服務
		  <span class="brand-badge"><span class="dot"></span> 尊榮體驗</span>
		  </div>
        </div>
      </div>
      <div class="brand-sub">157呆呆 專屬</div>
    </header>

    <!-- 點數顯示卡片（獨立管理員模式按鈕） -->
    <section class="card points-card" aria-label="點數顯示">
      <div class="card-inner">
        <div class="points-row">
          <div class="points-left">
            <div id="pointsValue" class="points-value">22</div>
            <div class="points-label">點數</div>
          </div>
          <div id="adminSlot" class="admin-slot">
            <button id="adminEnterBtn" class="btn btn-outline-gold" title="管理員模式">管理員模式</button>
          </div>
        </div>
      </div>
    </section>

    <!-- 選擇服務框：標題 + 提示小字 -->
    <section class="card service-card" aria-label="選擇服務框">
      <div class="card-inner">
        <div class="service-top">
          <div class="service-title">選擇服務（每項１點）</div>
          <div class="service-sub">提示：１點價值２００元</div>
        </div>
        <div id="openServiceBox" class="service-frame" title="點擊開啟服務介面">
          <div>點擊開啟服務介面</div>
          <button class="btn btn-outline-gold" aria-hidden="true">進入</button>
        </div>
      </div>
    </section>
  </div>

  <!-- 服務選擇介面（彈窗） -->
  <div id="serviceModal" class="modal" aria-hidden="true">
    <div class="panel" role="dialog" aria-modal="true" aria-labelledby="panelTitle">
      <div class="panel-inner">
        <div class="panel-top">
          <div id="panelTitle" class="panel-title">選擇服務項目</div>
          <div class="panel-actions">
            <button id="deleteSelectedBtn" class="btn btn-danger" style="display:none;">刪除選項</button>
            <button id="confirmBtn" class="btn btn-ok" style="display:none;">確定選擇</button>
            <button id="closeModalBtn" class="btn btn-outline-gold" aria-label="關閉">關閉</button>
          </div>
        </div>

        <div id="optionsGrid" class="options">
          <div class="option" data-key="wash-hair" data-default="true">洗頭</div>
          <div class="option" data-key="wash-body" data-default="true">洗澡</div>
          <div class="option" data-key="blow-hair" data-default="true">吹頭</div>
          <div id="plusOption" class="option plus" data-key="__plus__">＋</div>
        </div>
      </div>
    </div>
  </div>

  <script>
    // 密碼與狀態
    const PASSWORD = "Chiu!795";
    const pointsValueEl = document.getElementById('pointsValue');
    const adminSlot = document.getElementById('adminSlot');
    const adminEnterBtn = document.getElementById('adminEnterBtn');

    const openServiceBox = document.getElementById('openServiceBox');

    const modal = document.getElementById('serviceModal');
    const optionsGrid = document.getElementById('optionsGrid');
    const plusOption = document.getElementById('plusOption');
    const confirmBtn = document.getElementById('confirmBtn');
    const deleteSelectedBtn = document.getElementById('deleteSelectedBtn');
    const closeModalBtn = document.getElementById('closeModalBtn');

    // 起始點數 22（首次瀏覽），後續使用 localStorage 持久化
    const STORAGE_KEY = 'h_service_points';
    let stored = localStorage.getItem(STORAGE_KEY);
    let points = stored !== null ? Number(stored) : 22;
    if (Number.isNaN(points)) points = 22;
    updatePointsDisplay(points);

    function updatePointsDisplay(val){
      pointsValueEl.textContent = String(val);
      localStorage.setItem(STORAGE_KEY, String(val));
    }

    // 管理員模式（獨立個體）
    adminEnterBtn.addEventListener('click', (e) => {
      e.stopPropagation();
      const input = prompt("請輸入管理員密碼：");
      if (input === null) return;
      if (input === PASSWORD){
        enterAdminUI();
      } else {
        alert("密碼錯誤");
      }
    });

    function enterAdminUI(){
      adminSlot.innerHTML = "";
      const addBtn = mkBtn("+5", "btn-gold");
      const resetBtn = mkBtn("重設", "btn-outline-gold");
      const doneBtn = mkBtn("修改完畢", "btn-outline-gold");

      addBtn.addEventListener('click', (e) => {
        e.stopPropagation();
        points += 5;
        updatePointsDisplay(points);
      });
      resetBtn.addEventListener('click', (e) => {
        e.stopPropagation();
        if (confirm("確定將點數重設為 0？")){
          points = 0;
          updatePointsDisplay(points);
        }
      });
      doneBtn.addEventListener('click', (e) => {
        e.stopPropagation();
        // 恢復顯示「管理員模式」
        adminSlot.innerHTML = "";
        const backBtn = mkBtn("管理員模式", "btn-outline-gold");
        backBtn.id = "adminEnterBtn";
        adminSlot.appendChild(backBtn);
        backBtn.addEventListener('click', (ev) => {
          ev.stopPropagation();
          const input = prompt("請輸入管理員密碼：");
          if (input === null) return;
          if (input === PASSWORD){
            enterAdminUI();
          } else {
            alert("密碼錯誤");
          }
        });
        // 點數在操作時已即時更新
      });

      adminSlot.appendChild(addBtn);
      adminSlot.appendChild(resetBtn);
      adminSlot.appendChild(doneBtn);
    }

    function mkBtn(text, cls){
      const b = document.createElement('button');
      b.className = `btn ${cls}`;
      b.textContent = text;
      return b;
    }

    // 開啟 / 關閉服務介面
    function openModal(){
      modal.classList.add('show');
      modal.setAttribute('aria-hidden', 'false');
    }
    function closeModal(){
      modal.classList.remove('show');
      modal.setAttribute('aria-hidden', 'true');
      clearSelections();
      toggleActionButtons();
    }
    openServiceBox.addEventListener('click', openModal);
    closeModalBtn.addEventListener('click', closeModal);
    modal.addEventListener('click', (e) => {
      if (e.target === modal) closeModal(); // 點背景關閉
    });

    // 選項選取與 UI
    optionsGrid.addEventListener('click', (e) => {
      const item = e.target.closest('.option');
      if (!item) return;

      if (item.classList.contains('plus')){
        addCustomOption();
        return;
      }

      item.classList.toggle('selected');
      toggleActionButtons();
    });

    function toggleActionButtons(){
      const selectedCount = getSelectedOptions().length;
      confirmBtn.style.display = selectedCount > 0 ? 'inline-block' : 'none';
      deleteSelectedBtn.style.display = selectedCount > 0 ? 'inline-block' : 'none';
    }

    function getSelectedOptions(){
      return Array.from(optionsGrid.querySelectorAll('.option.selected'))
                  .filter(el => el.dataset.key !== '__plus__');
    }

    function clearSelections(){
      optionsGrid.querySelectorAll('.option.selected').forEach(el => el.classList.remove('selected'));
    }

    // 確定選擇 -> 立即扣除點數
    confirmBtn.addEventListener('click', () => {
      const selected = getSelectedOptions();
      const toDeduct = selected.length;
      if (toDeduct === 0) return;

      const newPoints = Math.max(0, points - toDeduct);
      const actuallyDeducted = points - newPoints;
      points = newPoints;
      updatePointsDisplay(points);

      clearSelections();
      toggleActionButtons();
      alert(`已扣除 ${actuallyDeducted} 點。`);
      closeModal();
    });

    // 刪除已選取的自訂項目（預設項目不刪）
    deleteSelectedBtn.addEventListener('click', () => {
      const selected = getSelectedOptions();
      if (selected.length === 0){
        alert("請先選取要刪除的項目。");
        return;
      }
      const customSelected = selected.filter(el => el.dataset.default !== 'true');
      if (customSelected.length === 0){
        alert("預設項目無法刪除。僅可刪除自訂項目。");
        return;
      }
      if (!confirm(`確定刪除 ${customSelected.length} 個自訂項目？`)) return;

      customSelected.forEach(el => el.remove());
      keepPlusLast();
      toggleActionButtons();
    });

    // 新增自訂項目（＋）
    function addCustomOption(){
      const name = prompt("請輸入要新增的項目名稱：");
      if (name === null) return;
      const label = (name || "").trim();
      if (!label){
        alert("項目名稱不可為空白。");
        return;
      }
      const key = "custom-" + Math.random().toString(36).slice(2,9);
      const opt = document.createElement('div');
      opt.className = 'option';
      opt.textContent = label;
      opt.dataset.key = key;
      opt.title = label;

      optionsGrid.insertBefore(opt, plusOption);
      keepPlusLast();
    }

    // 保證「＋」永遠在最後
    function keepPlusLast(){
      optionsGrid.appendChild(plusOption);
    }
  </script>
</body>
</html>
